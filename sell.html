<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>YMIR DIAMONDS üíé</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --txt:#fff7fb; --mut:#d9c7ce;
    --green:#22cf74; --yellow:#ffd64d; --red:#ff2b56;
    --blue:#1877f2; --discord:#5865f2; --gotyme:#00d6e7;
    --border: rgba(255,70,120,.20);
    --ring: conic-gradient(#ff1d5a,#ff5c90,#ff1d5a);
    --glow: 0 0 18px rgba(255,30,80,.34), 0 0 28px rgba(255,30,80,.14);
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:#09060a;color:var(--txt);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif;min-height:100%}

  /* Animated deep red background */
  body::before{
    content:"";position:fixed;inset:-20% -20%;z-index:-3;pointer-events:none;
    background:
      radial-gradient(40% 30% at 20% 10%, rgba(255,0,80,.16), transparent 60%),
      radial-gradient(35% 25% at 80% 0%, rgba(200,0,60,.10), transparent 65%),
      radial-gradient(55% 35% at 50% 110%, rgba(255,30,100,.10), transparent 70%),
      radial-gradient(60% 45% at 10% 90%, rgba(140,0,50,.08), transparent 70%);
    filter: blur(12px) saturate(115%);
    animation:bgFloat 16s ease-in-out infinite alternate;
  }
  @keyframes bgFloat{0%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(1%,-1%,0) scale(1.02)}100%{transform:translate3d(-1%,1%,0) scale(1.03)}}

  .wrap{max-width:760px;margin:auto;padding:16px 14px 110px}

  /* Title with creeping neon */
  .title{
    font-weight:900;letter-spacing:.6px;margin:6px 0 8px;text-align:center;
    font-size:22px; line-height:1.15;
    background: linear-gradient(90deg,#ff6aa1 0%,#ffd6ea 20%,#ff6aa1 40%,#ff2566 60%,#ffd6ea 80%,#ff6aa1 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    animation:shine 6s linear infinite; filter:drop-shadow(0 0 10px rgba(255,70,140,.35));
  }
  @keyframes shine{0%{background-position:0%}100%{background-position:200%}}

  /* Logo */
  .logoWrap{display:grid;place-items:center;margin:6px 0 8px}
  .logo{width:min(44vw,190px);aspect-ratio:1/1;border-radius:999px;position:relative;display:grid;place-items:center;background:radial-gradient(120px 110px at 50% 50%, #0b070b 40%, #000 100%);box-shadow:0 0 0 8px rgba(0,0,0,.55); cursor:pointer}
  .ring{position:absolute;inset:10px;border-radius:999px;background:var(--ring);filter:blur(.6px);-webkit-mask:radial-gradient(circle, transparent 61.5%, #000 63%);mask:radial-gradient(circle, transparent 61.5%, #000 63%);animation:spin 9s linear infinite;opacity:.55}
  @keyframes spin{to{transform:rotate(360deg)}}
  .logo img{width:82%;border-radius:999px;box-shadow:0 0 18px rgba(0,0,0,.35)}

  /* Owner under logo */
  .owner{margin:10px auto 8px;display:flex;gap:10px;align-items:center;justify-content:center;padding:10px 12px;border-radius:14px;background:linear-gradient(180deg,#131218,#0d0c12);border:1px solid rgba(255,255,255,.12);box-shadow:0 0 18px rgba(0,0,0,.25);font-weight:800;max-width:560px}
  .owner a{color:#fff;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
  .ownerName{letter-spacing:.3px}
  .metaBadge{width:22px;height:22px;display:inline-block;filter: drop-shadow(0 0 10px rgba(24,119,242,.45))}

  /* Tiers */
  .prices{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:8px 0 12px}
  .pill{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.00));border:1px solid var(--border);border-radius:18px;padding:12px;text-align:center;box-shadow:inset 0 0 0 1px rgba(255,30,80,.06), var(--glow);transition:transform .18s, box-shadow .18s, border-color .18s, opacity .18s; position:relative; overflow:hidden}
  .pval{font-size:26px;font-weight:900}
  .ptxt{font-size:12px;color:var(--mut)}
  .pill.active.t1{border-color:rgba(60,255,170,.6); box-shadow:0 0 24px rgba(60,255,170,.35), inset 0 0 0 1px rgba(60,255,170,.35)}
  .pill.active.t2{border-color:rgba(255,214,77,.8); box-shadow:0 0 26px rgba(255,214,77,.45), inset 0 0 0 1px rgba(255,214,77,.45)}
  .pill.active.t3{border-color:rgba(255,70,110,.9); box-shadow:0 0 28px rgba(255,70,110,.55), inset 0 0 0 1px rgba(255,70,110,.55)}
  /* BEST DEAL for 0.70 (only when active) */
  #pill70 .badge{
    position:absolute; top:-10px; right:10px; padding:4px 8px;
    font-size:10px; font-weight:900; color:#fff; background:#ff3a73; border-radius:999px;
    opacity:0; transform:translateY(-4px) scale(.95); transition:all .2s ease;
  }
  #pill70.active .badge{ opacity:1; transform:translateY(0) scale(1) }
  #pill70 .flare{position:absolute;inset:-20% -20%; background: conic-gradient(from 0deg, rgba(255,110,110,.0) 40%, rgba(255,120,120,.4) 55%, rgba(255,210,180,.0) 70%); filter:blur(16px); animation:flareSpin 2s linear infinite; display:none}
  @keyframes flareSpin{to{transform:rotate(360deg)}}
  #pill70.active .flare{display:block}
  #pill70::before{
    content:""; position:absolute; inset:-8px; border-radius:18px; pointer-events:none;
    background:radial-gradient(60% 50% at 50% 0%, rgba(255,160,0,0), transparent 60%),
               radial-gradient(50% 70% at 50% 100%, rgba(255,0,70,0), transparent 60%);
    filter:blur(12px); opacity:0; transition:opacity .2s ease;
  }
  #pill70.active::before{
    background:radial-gradient(60% 50% at 50% 0%, rgba(255,160,0,.55), transparent 60%),
               radial-gradient(50% 70% at 50% 100%, rgba(255,0,70,.30), transparent 60%);
    opacity:.9; animation:flick 1.2s ease-in-out infinite alternate;
  }
  @keyframes flick{from{transform:translateY(0)}to{transform:translateY(-2px)}}

  /* Inputs/result */
  .section{background:linear-gradient(180deg,#160e14,#110c11);border:1px solid var(--border);border-radius:18px;padding:14px;box-shadow:var(--glow)}
  .label{font-size:13px;color:var(--mut);margin:4px 2px 6px}
  .in{width:100%;border:1px solid var(--border);background:#0b090c;color:#fff;padding:14px;border-radius:14px;font-size:18px;outline:none;box-shadow:inset 0 0 18px rgba(255,10,60,.06), 0 0 14px rgba(255,40,100,.12)}
  .in:focus{border-color:#ff6aa1;box-shadow:0 0 0 3px rgba(255,60,110,.18), var(--glow)}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px}
  .box{background:linear-gradient(180deg,#1a1218,#120e13);border:1px solid var(--border);border-radius:16px;padding:12px;text-align:center;box-shadow:var(--glow)}
  .box h5{margin:0 0 4px;font-size:12px;color:var(--mut)}
  .rateOut{font-weight:900;font-size:20px}
  .saveOut{font-weight:900;font-size:20px;color:#baffd6}
  .saveBox{background:linear-gradient(180deg,#0f2117,#0a1a11);border-color:rgba(40,255,160,.28)}
  .warn{margin-top:8px;font-size:12px;color:#ff8aa0;display:none}

  /* Buttons */
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;border:none;border-radius:14px;padding:14px 16px;font-weight:800;letter-spacing:.2px;cursor:pointer;user-select:none}
  .buy{background:var(--green);color:#092112;font-size:18px;box-shadow:0 18px 44px rgba(33,208,114,.28);width:100%;margin-top:10px}
  .btn[disabled]{opacity:.55;filter:grayscale(.25);cursor:not-allowed}

  /* Payments */
  .pay{background:linear-gradient(180deg,#11111a,#0b0c12);border:1px solid rgba(24,119,242,.22);border-radius:18px;padding:12px 14px;box-shadow:0 0 22px rgba(24,119,242,.16);margin-top:12px}
  .payRow{display:flex;align-items:center;gap:10px;font-weight:800;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:12px}
  .gcash{background:rgba(24,119,242,.10);border-color:rgba(24,119,242,.35)}
  .gotyme{background:rgba(0,214,231,.10);border-color:rgba(0,214,231,.45)}
  .pIcon{width:26px;height:26px;border-radius:999px;display:grid;place-items:center;color:#000;font-weight:900}
  .pIcon.g{background:#1877f2;color:#fff}
  .pIcon.go{background:var(--gotyme);color:#00353a;font-family:Arial Black,Arial,sans-serif}
  .qrBtn{margin-left:auto;background:#22242a;color:#fff;border-radius:10px;padding:10px 14px;border:none;font-weight:800;cursor:pointer}
  .copyable{cursor:pointer}

  .soc{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
  .btnlink{display:inline-flex;align-items:center;justify-content:center;gap:10px;border-radius:14px;padding:14px 16px;font-weight:800;letter-spacing:.2px;text-decoration:none}
  .fb{background:var(--blue);color:#fff}
  .dc{background:var(--discord);color:#fff}

  /* Track Order */
  .track{margin-top:16px;background:linear-gradient(180deg,#151219,#100f14);border:1px solid rgba(255,255,255,.14);border-radius:18px;padding:14px;box-shadow:0 0 18px rgba(0,0,0,.25)}
  .track .grid3{display:grid;grid-template-columns:1fr auto auto;gap:10px}
  .pillStat{display:inline-block;padding:8px 12px;border-radius:999px;font-weight:900;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06)}
  .sPending{color:#ffd64d;border-color:rgba(255,214,77,.45)}
  .sPaid{color:#22cf74;border-color:rgba(34,207,116,.45)}
  .sDone{color:#ff7896;border-color:rgba(255,120,150,.45)}

  /* Notices / popups */
  .notice{margin-top:12px;padding:12px 14px;border-radius:14px;background:linear-gradient(180deg,#17141a,#120f14);border:1px solid rgba(255,255,255,.14);box-shadow:0 0 18px rgba(0,0,0,.25)}
  .notice p{margin:0;color:var(--mut);font-size:13px}

  #buyPopup,#copyPopup,#qrModal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;place-items:center;z-index:50}
  .cardPop{width:min(92vw,520px);background:#0f0d10;border:1px solid var(--border);border-radius:18px;padding:18px;text-align:center}
  .cardPop img{max-width:min(82vw,440px);width:100%;height:auto;border-radius:12px}

  /* Thanks */
  .thanks{margin:14px auto 0;max-width:760px;text-align:center;font-weight:800;letter-spacing:.2px}
  .thanks span{display:inline-block;padding:10px 14px;border-radius:12px;background:radial-gradient(80% 120% at 50% 0, rgba(40,255,170,.12), rgba(255,0,100,.10)); box-shadow:0 0 22px rgba(255,70,120,.16)}
  .thanks span b{animation:pulse 2s ease-in-out infinite}
  @keyframes pulse{0%,100%{text-shadow:0 0 0 rgba(255,255,255,0)}50%{text-shadow:0 0 12px rgba(255,255,255,.8)}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="title">YMIR DIAMONDS üíé</div>

    <div class="logoWrap">
      <div class="logo" id="secretLogo">
        <div class="ring"></div>
        <img src="logo.png" alt="Logo">
      </div>
    </div>

    <!-- Owner strip -->
    <div class="owner">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="#1877f2" aria-hidden="true">
        <path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.01 3.66 9.17 8.44 9.93v-7.02H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.91h-2.34V22c4.78-.76 8.44-4.92 8.44-9.93z"/>
      </svg>
      <a href="https://www.facebook.com/share/1FWLHh32iE/" target="_blank" rel="noopener">
        <span class="ownerName">MOISES TRAJANO BITONIO</span>
        <svg class="metaBadge" viewBox="0 0 24 24" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#2aa4ff"/><stop offset="1" stop-color="#1877f2"/></linearGradient></defs>
          <circle cx="12" cy="12" r="10" fill="url(#g)"/>
          <path d="M9.2 12.6l-1.7-1.7a1 1 0 10-1.4 1.4l2.4 2.4c.4.4 1 .4 1.4 0l6.1-6.1a1 1 0 10-1.4-1.4l-5.4 5.4z" fill="#fff"/>
        </svg>
      </a>
    </div>

    <!-- Tiers -->
    <div class="prices">
      <div id="pill80" class="pill"><div class="pval">‚Ç±0.80</div><div class="ptxt">min 1000 üíé</div></div>
      <div id="pill75" class="pill"><div class="pval">‚Ç±0.75</div><div class="ptxt">min 4000 üíé</div></div>
      <div id="pill70" class="pill">
        <div class="flare"></div>
        <div class="badge">BEST DEAL</div>
        <div class="pval">‚Ç±0.70</div><div class="ptxt">min 8000 üíé</div>
      </div>
    </div>

    <!-- Inputs -->
    <div class="section">
      <div class="label">Enter Diamonds üíé</div>
      <input id="dias" class="in" inputmode="numeric" autocomplete="off" placeholder="e.g. 1500">
      <div class="label" style="margin-top:10px">ENTER PHP ‚Ç±</div>
      <input id="phpIn" class="in" inputmode="decimal" autocomplete="off" placeholder="e.g. 500.00">
      <div class="label" style="margin-top:10px">Server (required) üåê</div>
      <input id="serverIn" class="in" autocomplete="off" placeholder="e.g. Asia 22 or HOF1">
      <div id="warn" class="warn">Minimum 1000 üíé required and Server is needed.</div>

      <div class="grid2">
        <div class="box">
          <h5>Rate</h5>
          <div id="rateOut" class="rateOut">‚Äî</div>
        </div>
        <div class="box saveBox">
          <h5>Save</h5>
          <div id="saveOut" class="saveOut">‚Äî</div>
        </div>
      </div>
    </div>

    <!-- Buy -->
    <button id="buyBtn" type="button" class="btn buy" disabled>üíé Buy</button>
    <div class="label" style="text-align:center;margin-top:8px">Enter at least 1000 dias or PHP equivalent.</div>

    <!-- Payments -->
    <div class="pay">
      <div class="payRow gcash">
        <div class="pIcon g">G</div>
        <div id="gcashCopy" class="copyable">GCash ‚Ä¢ <strong>09162466318 ‚Äî MOISES B.</strong></div>
        <button class="qrBtn" id="gcashQR">Show QR</button>
      </div>

      <div style="height:10px"></div>

      <div class="payRow gotyme">
        <div class="pIcon go">GO</div>
        <div id="goCopy" class="copyable">GoTyme ‚Ä¢ <strong>014664932955 ‚Äî MOISES BITONIO</strong></div>
        <button class="qrBtn" id="goQR">Show QR</button>
      </div>

      <div class="soc">
        <a class="btnlink fb" href="https://www.facebook.com/share/p/17MiaRJ24J/" target="_blank" rel="noopener">FACEBOOK FEEDBACK</a>
        <a class="btnlink dc" href="https://discord.gg/QkdVz5mh" target="_blank" rel="noopener">DISCORD FEEDBACK</a>
      </div>
    </div>

    <!-- Waiting Time Notice (1st) -->
    <div class="notice" style="margin-top:14px">
      <h4>‚è≥ Waiting Time Notice</h4>
      <p>Processing time may vary depending on server demand. Some servers might experience longer wait times ‚Äî pero guaranteed matatanggap ang order mo.</p>
    </div>

    <!-- Thanks (2nd) -->
    <div class="thanks"><span>Thanks for trusting us, <b>GG!</b> Keep your Receipt ID for tracking.</span></div>

    <!-- Track Order (3rd, pinaka-baba) -->
    <div class="track">
      <div class="label">TRACK ORDER</div>
      <div class="grid3">
        <input id="ridIn" class="in" autocomplete="off" placeholder="Enter Receipt ID">
        <button id="paidBtn" class="btn" style="background:#1c2b22;color:#bfffdc">I Paid</button>
        <button id="checkBtn" class="btn" style="background:#24212a;color:#fff">Check</button>
      </div>
      <div class="label" style="margin-top:10px">Status: <span id="statusOut" class="pillStat sPending">PENDING</span></div>
    </div>
  </div>

  <!-- Popups -->
  <div id="buyPopup"><div class="cardPop">
    <h3>Copied ‚úî</h3>
    <p><b>I-PASTE MO ITO SA MESSENGER KO.</b><br>Open Messenger then paste the order message.</p>
    <button class="btn" id="buyOk" style="background:#272327;color:#fff;width:160px;margin:auto">OK</button>
  </div></div>

  <div id="copyPopup"><div class="cardPop">
    <h3>Copied ‚úî</h3>
    <p id="copyMsg">Copied to clipboard.</p>
    <button class="btn" id="copyOk" style="background:#272327;color:#fff;width:160px;margin:auto">OK</button>
  </div></div>

  <div id="qrModal"><div class="cardPop">
    <h3 id="qrTitle">QR</h3>
    <img id="qrImg" src="" alt="QR">
    <button class="btn" id="qrOk" style="background:#272327;color:#fff;width:160px;margin:auto">Close</button>
  </div></div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  /* Shortcuts */
  const $ = id => document.getElementById(id);
  const clean = v => String(v ?? '').replace(/[^\d.]/g,'');
  const toInt = v => { const m = clean(v).match(/^\d+/); return m? parseInt(m[0],10):0; };
  const toNum = v => { const m = clean(v).match(/^\d+(?:\.\d+)?/); return m? parseFloat(m[0]):0; };
  const fmt  = n => Number(n).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2});

  /* Tier rules */
  const MIN1=1000, MIN2=4000, MIN3=8000;
  const T1=0.80, T2=0.75, T3=0.70;

  /* Storage */
  const STORE_KEY='ymir_orders'; // map: { rid: {status:'PENDING'|'PAID'|'DELIVERED', server, qty, total } }
  function loadOrders(){ try{ return JSON.parse(localStorage.getItem(STORE_KEY)||'{}'); }catch{ return {}; } }
  function saveOrders(map){ try{ localStorage.setItem(STORE_KEY, JSON.stringify(map)); }catch{} }

  function getRate(q){
    if(!q || q<MIN1) return null;
    if(q<MIN2) return T1;
    if(q<MIN3) return T2;
    return T3;
  }
  function estimateFromPHP(p){
    if(!p||p<=0) return 0;
    let q = Math.floor(p/T1);
    for(let i=0;i<4;i++){
      const r = getRate(q) ?? T1;
      q = Math.floor(p/r);
    }
    return q;
  }

  function paintPills(q, r){
    const p80=$('pill80'), p75=$('pill75'), p70=$('pill70');
    [p80,p75,p70].forEach(p=>p.classList.remove('active','t1','t2','t3'));
    if(!q || q<MIN1) return;
    if(r===T1){ p80.classList.add('active','t1'); }
    if(r===T2){ p75.classList.add('active','t2'); }
    if(r===T3){ p70.classList.add('active','t3'); } // BEST DEAL/fire via CSS when active
  }

  const diasEl=$('dias'), phpEl=$('phpIn'), serverEl=$('serverIn');
  const rateOut=$('rateOut'), saveOut=$('saveOut'), warn=$('warn'), buyBtn=$('buyBtn');

  let lastEdited=null;
  function validServer(){ return serverEl.value.trim().length>0; }

  function recalc(){
    let q = toInt(diasEl.value);
    let p = toNum(phpEl.value);

    if(lastEdited==='p'){ q = estimateFromPHP(p); diasEl.value = q ? String(q) : ''; }
    else if(lastEdited==='d'){ const r = getRate(q); phpEl.value = (r && q) ? fmt(q*r) : ''; }
    else{
      if(!q && p){ q = estimateFromPHP(p); diasEl.value = q?String(q):''; }
      if(q && !p){ const r=getRate(q); phpEl.value = r?fmt(q*r):''; }
    }

    const r=getRate(q);
    paintPills(q,r);

    const ok = q>=MIN1 && !!r && validServer();
    warn.style.display = ok ? 'none' : 'block';
    buyBtn.disabled = !ok;

    if(r && q){
      rateOut.textContent = `‚Ç±${r.toFixed(2)} / dia`;
      const base=q*T1, saveAmt=Math.max(0, base-(q*r));
      const savePct=Math.max(0,(1-r/T1)*100);
      saveOut.textContent = `${savePct.toFixed(2)}% ‚Ä¢ ‚Ç±${fmt(saveAmt)}`;
    }else{
      rateOut.textContent='‚Äî'; saveOut.textContent='‚Äî';
    }
  }

  ['input','change','keyup'].forEach(ev=>{
    diasEl.addEventListener(ev, ()=>{ lastEdited='d'; recalc(); });
    phpEl.addEventListener(ev,  ()=>{ lastEdited='p'; recalc(); });
    serverEl.addEventListener(ev, recalc);
  });
  recalc();

  /* Receipt ID helpers */
  function genRID(){
    const t = Date.now().toString(36).toUpperCase();
    const r = Math.random().toString(36).slice(2,6).toUpperCase();
    return `YMIR-${t}-${r}`;
  }
  function setStatusUI(status){
    const o=$('statusOut');
    o.className='pillStat';
    if(status==='DELIVERED'){ o.classList.add('sDone'); o.textContent='DELIVERED'; }
    else if(status==='PAID'){ o.classList.add('sPaid'); o.textContent='PAID'; }
    else { o.classList.add('sPending'); o.textContent='PENDING'; }
  }
  function readRID(){ return $('ridIn').value.trim(); }

  /* Query param auto-fill ?rid=... */
  (function(){
    const params = new URLSearchParams(location.search);
    const rid = params.get('rid');
    if(rid){ $('ridIn').value = rid; const map=loadOrders(); setStatusUI((map[rid]?.status)||'PENDING'); }
  })();

  /* Buy: copy receipt + popup + store order */
  $('buyBtn').addEventListener('click', async ()=>{
    let q = toInt(diasEl.value);
    let p = toNum(phpEl.value);
    if(!q && p) q = estimateFromPHP(p);
    const r = getRate(q);
    if(!r || !validServer()){ recalc(); return; }
    const total = p || (q*r);
    const rid = genRID();

    const map = loadOrders();
    map[rid] = {
      status:'PENDING',
      server: serverEl.value.trim(),
      qty: q,
      total: total
    };
    saveOrders(map);

    $('ridIn').value = rid;
    setStatusUI('PENDING');

    const msg = `BUY ORDER
Receipt: ${rid}
Diamonds: ${q} üíé
Rate: ‚Ç±${r.toFixed(2)} / dia
Total: ‚Ç±${fmt(total)}
Server: ${serverEl.value.trim()}
GCash: 09162466318 (MOISES B.)`;
    try{ await navigator.clipboard.writeText(msg); }catch{}
    $('buyPopup').style.display='grid';
  });
  $('buyOk').onclick=()=>{$('buyPopup').style.display='none';};

  /* Track Order actions */
  $('checkBtn').addEventListener('click', ()=>{
    const rid = readRID(); if(!rid) return;
    const map=loadOrders(); setStatusUI((map[rid]?.status)||'PENDING');
  });
  $('paidBtn').addEventListener('click', ()=>{
    const rid = readRID(); if(!rid) return;
    const map=loadOrders();
    const cur = map[rid] || {status:'PENDING'};
    cur.status='PAID';
    map[rid]=cur; saveOrders(map);
    setStatusUI('PAID');
  });

  /* Secret Delivered: tap the logo 6√ó */
  (function(){
    let taps=0, last=0;
    $('secretLogo').addEventListener('click', ()=>{
      const now=Date.now();
      if(now-last>1500){ taps=0; }
      last=now; taps++;
      if(taps>=6){
        taps=0;
        const rid=readRID(); if(!rid) return;
        const map=loadOrders();
        const cur = map[rid] || {status:'PENDING'};
        cur.status='DELIVERED';
        map[rid]=cur; saveOrders(map);
        setStatusUI('DELIVERED');
      }
    });
  })();

  /* Copy helpers + popups */
  function showCopy(text){
    $('copyMsg').textContent = text;
    $('copyPopup').style.display='grid';
  }
  $('copyOk').onclick=()=>{$('copyPopup').style.display='none';};

  // GCash copy
  $('gcashCopy').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText('09162466318'); }catch{}
    showCopy('GCash number copied. Paste in Express Send.');
  });

  // GoTyme copy
  $('goCopy').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText('014664932955'); }catch{}
    showCopy('GoTyme account copied. Paste in Send Money.');
  });

  // QR viewer
  const qrModal=$('qrModal'), qrImg=$('qrImg'), qrTitle=$('qrTitle');
  $('qrOk').onclick=()=>{ qrModal.style.display='none'; };
  $('gcashQR').onclick=()=>{ qrTitle.textContent='GCash QR'; qrImg.src='gcash-qr.png'; qrModal.style.display='grid'; };
  $('goQR').onclick=()=>{ qrTitle.textContent='GoTyme QR'; qrImg.src='gotyme-qr.png'; qrModal.style.display='grid'; };
});
</script>
</body>
</html>