<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Legend of Ymir â€“ Diamond Pricing</title>
<style>
  :root{
    --bg1:#000; --bg2:#4e0015;
    --card:rgba(255,255,255,.07);
    --line:rgba(255,255,255,.08);
    --muted:#d9d9d9;
    --blue:#1877F2; --discord:#5865F2;
  }
  html,body{margin:0;padding:0;font-family:system-ui,Segoe UI,Arial,sans-serif;color:#fff;background:
    radial-gradient(circle at 50% -10%, var(--bg2), transparent 55%),
    #000;}
  .wrap{max-width:680px;margin:0 auto;padding:14px}
  /* Logo + glow */
  .logoWrap{display:grid;place-items:center;margin-top:18px}
  .logo{width:140px;height:140px;border-radius:50%;
    filter:drop-shadow(0 0 10px #ff0040) drop-shadow(0 0 26px #ff2040);
    animation:glow 3s ease-in-out infinite alternate}
  @keyframes glow{from{filter:drop-shadow(0 0 8px #ff0040) drop-shadow(0 0 18px #ff2040)}
                  to{filter:drop-shadow(0 0 18px #ff3760) drop-shadow(0 0 40px #ff2040)}}
  h1{margin:10px 0 0;font-size:26px;text-align:center;font-weight:900;
     text-shadow:0 0 12px rgba(255,0,60,.45),0 0 26px rgba(255,0,60,.25)}
  .sub{opacity:.85;text-align:center;margin:6px 0 10px}

  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin:10px}
  .tiers{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
  .tier{background:#0e0e0e;border:1px solid var(--line);border-radius:12px;padding:12px;text-align:center}
  .tier .lab{font-size:12px;color:var(--muted)}
  .tier .val{font-size:22px;font-weight:900;text-shadow:0 0 10px rgba(255,0,0,.35)}
  .tier.active{outline:2px solid #ff3a60;box-shadow:0 0 20px rgba(255,0,0,.22) inset}

  label{display:block;font-size:12px;color:var(--muted);margin:6px 0}
  input{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);
        background:#0c0c0c;color:#fff;font-size:18px;text-align:center}

  .rateRow{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .rateBox{display:flex;gap:12px;align-items:flex-start}
  .rateTag{background:#150408;border:1px solid #3a0c14;border-radius:12px;padding:10px 14px;
           font-weight:900;font-size:20px;box-shadow:0 0 18px rgba(255,0,0,.18) inset}
  .rateInfo{font-size:12px;color:var(--muted)}
  .saveTag{background:#04330f;border:1px solid #146327;border-radius:10px;padding:8px 10px;
           font-weight:800;font-size:13px;color:#96ffb0;box-shadow:0 0 14px rgba(0,220,100,.18) inset}

  .btn{cursor:pointer;border:none;border-radius:12px;padding:12px 18px;font-size:18px;font-weight:800}
  .buy{background:#007bff}
  .buy:active{background:#005fcc}

  .pay{display:flex;gap:12px;align-items:center;background:rgba(0,80,255,.25);
       border:1px solid rgba(0,80,255,.35);border-radius:12px;padding:12px;margin-top:6px}
  .chip{background:#2a8cff;color:#fff;border-radius:999px;padding:6px 10px;font-size:12px;font-weight:800}

  .links{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:8px}
  .fb,.dc{border:none;border-radius:12px;padding:10px 16px;font-weight:800;color:#fff;font-size:15px}
  .fb{background:var(--blue)} .dc{background:var(--discord)}

  .row{display:flex;align-items:center;justify-content:space-between}
  .count{font-size:18px;font-weight:900}
  .hint{font-size:13px;color:var(--muted);text-align:center;margin:8px 4px 0}
</style>
</head>
<body>
<div class="wrap">

  <div class="logoWrap"><img src="logo.png" class="logo" alt="Logo"></div>
  <h1>Legend of Ymir â€“ Diamond Pricing</h1>
  <div class="sub">Enter diamonds or PHP. Bigger orders unlock better rates.</div>

  <!-- Price chips -->
  <section class="card">
    <div class="tiers">
      <div class="tier" id="chip80"><div class="lab">Price / dia</div><div class="val">â‚±0.80</div></div>
      <div class="tier" id="chip75"><div class="lab">Price / dia</div><div class="val">â‚±0.75</div></div>
      <div class="tier" id="chip70"><div class="lab">Price / dia</div><div class="val">â‚±0.70</div></div>
    </div>
  </section>

  <!-- Inputs -->
  <section class="card">
    <label>Enter Diamonds</label>
    <input id="qty" type="number" placeholder="e.g. 1500" inputmode="numeric" />
    <label style="margin-top:10px">ENTER PHP</label>
    <input id="php" type="number" placeholder="e.g. 500.00" inputmode="decimal" />
  </section>

  <!-- Applied rate + savings -->
  <section class="card">
    <div class="rateRow">
      <div class="rateBox">
        <div>
          <div class="rateTag" id="rateTag">â€”</div>
          <div class="rateInfo" id="rateInfo">Enter at least 500 dias or equivalent PHP.</div>
        </div>
        <div class="saveTag" id="saveTag" style="display:none">Saving â€”</div>
      </div>
      <button class="btn buy" id="buyBtn">ðŸ’Ž Buy</button>
    </div>
    <div class="hint">Tap <b>BUY</b> â†’ message auto-copied â†’ <b>Paste sa Messenger ko</b> to process.</div>
  </section>

  <!-- Payment + socials -->
  <section class="card">
    <div class="pay">
      <span class="chip">GCash</span>
      <div>09162466318 â€” <b>MOISES B.</b></div>
    </div>
    <div class="links">
      <button class="fb" onclick="window.open('https://www.facebook.com/share/p/1DB1da3qMn/','_blank')">ðŸ“˜ Facebook</button>
      <button class="dc" onclick="window.open('https://discord.gg/QkdVz5mh','_blank')">ðŸŸ£ Discord</button>
    </div>
  </section>

  <!-- Local device counter -->
  <section class="card">
    <div class="row">
      <div class="rateInfo">Transactions Completed</div>
      <div class="count" id="count">0</div>
    </div>
  </section>

</div>

<script>
/* ---------- Config ---------- */
const MIN_QTY = 500;
const TIERS = [
  {max:3000, rate:0.80, name:'Normal'},
  {max:7000, rate:0.75, name:'Retail'},
  {max:Infinity, rate:0.70, name:'Bulk'}
];
const BASE = 0.80; // for discount computation

/* ---------- DOM ---------- */
const $ = (id)=>document.getElementById(id);
const qty = $('qty'), php = $('php');
const rateTag = $('rateTag'), rateInfo = $('rateInfo'), saveTag = $('saveTag');

/* ---------- Tier helpers ---------- */
function tierByQty(q){
  if(q < MIN_QTY) return null;
  if(q <= 3000) return TIERS[0];
  if(q <= 7000) return TIERS[1];
  return TIERS[2];
}
function hilite(r){
  ['chip80','chip75','chip70'].forEach(id => $(id).classList.remove('active'));
  if(!r) return;
  if(r.rate===0.80) $('chip80').classList.add('active');
  else if(r.rate===0.75) $('chip75').classList.add('active');
  else $('chip70').classList.add('active');
}
function showSavings(rate, q){
  if(!rate || !q){ saveTag.style.display='none'; return; }
  const per = (BASE-rate.rate);
  const pct = (per/BASE)*100;                   // % off
  const totalSave = per * q;                    // PHP saved vs base
  saveTag.textContent = `Save ${pct.toFixed(2)}%  â€¢  â‚±${totalSave.toFixed(2)}`;
  saveTag.style.display='inline-block';
}

/* ---------- Sync inputs ---------- */
let guard=false;
function syncFromQty(){
  const q = Number(qty.value||0);
  const t = tierByQty(q);
  if(!t){ rateTag.textContent='â€”'; rateInfo.textContent='Enter at least 500 dias or equivalent PHP.'; hilite(null); showSavings(null,0); return; }
  guard=true; php.value=(t.rate*q).toFixed(2); guard=false;
  rateTag.textContent=`â‚±${t.rate.toFixed(2)} / dia`;
  rateInfo.textContent=`${t.name} tier detected for ${q.toLocaleString()} dias.`;
  hilite(t); showSavings(t,q);
}
function syncFromPhp(){
  const p = Number(php.value||0);
  if(p<=0){ rateTag.textContent='â€”'; rateInfo.textContent='Enter at least 500 dias or equivalent PHP.'; hilite(null); showSavings(null,0); return; }
  // assume best tier first then adjust
  let d = Math.floor(p / TIERS[2].rate);
  if(d < 8000 && d >= 4000) d = Math.floor(p / TIERS[1].rate);
  if(d < 4000) d = Math.floor(p / TIERS[0].rate);
  guard=true; qty.value = d>0?d:''; guard=false;
  const t = tierByQty(d);
  if(!t){ rateTag.textContent='â€”'; rateInfo.textContent='Enter at least 500 dias or equivalent PHP.'; hilite(null); showSavings(null,0); return; }
  rateTag.textContent=`â‚±${t.rate.toFixed(2)} / dia`;
  rateInfo.textContent=`${t.name} tier estimated for ~${d.toLocaleString()} dias.`;
  hilite(t); showSavings(t,d);
}
qty.addEventListener('input', ()=>{ if(!guard) syncFromQty(); });
php.addEventListener('input', ()=>{ if(!guard) syncFromPhp(); });

/* ---------- Success chime ---------- */
function chime(){
  try{
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const now = ctx.currentTime;
    [880,1320].forEach((f,i)=>{
      const o=ctx.createOscillator(), g=ctx.createGain();
      o.type='sine'; o.frequency.value=f; o.connect(g); g.connect(ctx.destination);
      const t0=now+i*0.08;
      g.gain.setValueAtTime(0,t0);
      g.gain.linearRampToValueAtTime(0.18,t0+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001,t0+0.28);
      o.start(t0); o.stop(t0+0.30);
    });
  }catch(e){}
}

/* ---------- BUY: copy + count + chime ---------- */
const COUNT_KEY='ymirCount';
function getCount(){ return Number(localStorage.getItem(COUNT_KEY)||0); }
function setCount(n){ localStorage.setItem(COUNT_KEY,String(n)); $('count').textContent=n; }
setCount(getCount()); // init

$('buyBtn').addEventListener('click', async ()=>{
  const q = Number(qty.value||0);
  const p = Number(php.value||0);
  const t = tierByQty(q);
  const rateText = t ? `â‚±${t.rate.toFixed(2)} / dia` : 'â€”';
  const msg = `LEGEND OF YMIR ORDER
Diamonds: ${q.toLocaleString()} ðŸ’Ž
Amount: â‚±${p.toFixed(2)}
Rate: ${rateText}
Pay via GCash: 09162466318 (MOISES B.)`;

  try{ await navigator.clipboard.writeText(msg); }catch(e){}
  chime(); if(navigator.vibrate) navigator.vibrate([20,40]);

  setCount(getCount()+1);

  // Also attempt to open Messenger compose (best effort; some browsers may block)
  const m = 'https://m.me/?text=' + encodeURIComponent(msg);
  const w = window.open(m,'_blank'); if(!w) alert('âœ… Copied! Paste sa Messenger ko to proceed.');
});

/* boot */
syncFromQty();
</script>
</body>
</html>