<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Legend of Ymir â€“ Diamond Price Calculator</title>

<style>
:root{
  --bg:#ffffff;
  --text:#111111;
  --accent:#cc0000;
  --card:#f4f4f4;
  --line:#dddddd;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:Arial, sans-serif;background:var(--bg);color:var(--text);
}
.wrap{
  max-width:720px;margin:0 auto;padding:20px;
}
h1{
  text-align:center;font-weight:800;color:var(--accent);
  text-shadow:0px 0px 6px rgba(255,0,0,0.6);
}
.card{
  background:var(--card);
  border:1px solid var(--line);
  padding:16px;border-radius:14px;margin-top:14px;
}
.grid{display:grid;gap:12px}
.kpi{
  padding:14px;text-align:center;background:white;border:1px solid var(--line);
  border-radius:12px;
}
.kpi .label{font-size:13px;color:#555}
.kpi .val{font-size:22px;font-weight:800;color:var(--accent)}

input{
  width:100%;padding:14px;font-size:18px;border:1px solid var(--line);
  border-radius:12px;outline:none;background:white;color:var(--text);
}
pre{
  background:white;border:1px solid var(--line);padding:12px;border-radius:12px;
  white-space:pre-wrap;font-size:15px;
}
button{
  margin-top:8px;width:100%;padding:12px;font-weight:700;border:0;border-radius:12px;
  background:var(--accent);color:white;font-size:16px;cursor:pointer;
}
button:hover{filter:brightness(1.1)}
</style>
</head>

<body>
<div class="wrap">
  <h1>ðŸ’Ž Legend of Ymir â€“ Diamond Price Calculator</h1>

  <section class="card">
    <div style="font-size:13px;color:#888;">Price Table (Locked)</div>
    <div class="grid" style="grid-template-columns:repeat(3,1fr); margin-top:8px">
      <div class="kpi"><div class="label">1â€“3000</div>    <div class="val" id="r3000">â€”</div></div>
      <div class="kpi"><div class="label">4000â€“7000</div> <div class="val" id="r7000">â€”</div></div>
      <div class="kpi"><div class="label">8000+</div>     <div class="val" id="r8000">â€”</div></div>
    </div>
    <div style="font-size:13px;color:#555;margin-top:6px">Minimum: <span id="min">â€”</span> dias</div>
  </section>

  <section class="card">
    <label style="font-size:14px;color:#555;">Enter Diamonds</label>
    <input id="qty" type="number" placeholder="e.g. 1500" oninput="calc()" />
  </section>

  <section class="card">
    <div class="grid" style="grid-template-columns:1fr 1fr;">
      <div class="kpi"><div class="label">Tier Rate</div><div class="val" id="rate">â€”</div></div>
      <div class="kpi"><div class="label">Total Price</div><div class="val" id="sell">â€”</div></div>
    </div>
  </section>

  <section class="card">
    <div style="font-size:13px;color:#555;">Copy Message</div>
    <pre id="out">/calc â€”\nSell: â€” PHP</pre>
    <button onclick="copyOut()">Copy</button>
  </section>

</div>

<script>
let CFG = { min:500, price_3000:0.80, price_7000:0.75, price_8000:0.70 };

async function loadConfig(){
  try{
    const res = await fetch('./config.json', { cache:'no-store' });
    if(res.ok){
      CFG = await res.json();
    }
  }catch(e){}
  document.getElementById('r3000').textContent = CFG.price_3000.toFixed(2)+" PHP";
  document.getElementById('r7000').textContent = CFG.price_7000.toFixed(2)+" PHP";
  document.getElementById('r8000').textContent = CFG.price_8000.toFixed(2)+" PHP";
  document.getElementById('min').textContent  = CFG.min;
  calc();
}

function rate(q){
  if(q < CFG.min) return 0;
  if(q <= 3000) return CFG.price_3000;
  if(q <= 7000) return CFG.price_7000;
  return CFG.price_8000;
}

function calc(){
  const q = Number(document.getElementById('qty').value||0);
  const r = rate(q);
  const total = r ? r*q : 0;
  document.getElementById('rate').textContent = r ? r.toFixed(2)+" PHP" : "MIN "+CFG.min;
  document.getElementById('sell').textContent = r ? total.toFixed(2)+" PHP" : "â€”";
  document.getElementById('out').textContent = `/calc ${q}\nSell: ${r?total.toFixed(2):"â€”"} PHP`;
}

async function copyOut(){
  try{
    await navigator.clipboard.writeText(document.getElementById('out').textContent);
    alert("Copied âœ…");
  }catch{}
}
loadConfig();
</script>
</body>
</html>
